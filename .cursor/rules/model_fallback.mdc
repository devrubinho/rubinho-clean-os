---
description: Guidelines for handling Claude model rate limits and using Opus as fallback
globs: **/*
alwaysApply: true
---

# Claude Model Fallback - Rate Limit Handling

## **Rate Limit Detection**

When you see rate limit messages in the console like:
- "Limit reached · resets 4am (America/Fortaleza)"
- "Limit reached · resets [time] · /upgrade to Max or turn on /extra-usage"

This means the current model (usually Sonnet) has reached its usage limit.

## **Automatic Fallback Strategy**

### **Task Master (Already Configured)**
- ✅ Task Master is already configured with Opus as fallback
- ✅ Will automatically use `claude-3-opus-20240229` if Sonnet fails
- ✅ Configuration in `.taskmaster/config.json`:
  - Main: `claude-3-7-sonnet-20250219`
  - Fallback: `claude-3-opus-20240229`

### **Cursor IDE (Manual Selection Required)**

**Important:** Cursor does NOT have automatic fallback when rate limit is reached. You must manually switch models.

**When Rate Limit is Reached:**

1. **In Cursor Chat:**
   - Click on the model selector (top of chat window)
   - Select `claude-3-opus` or `claude-3-opus-20240229`
   - Continue your conversation

2. **Alternative: Change Default Model in Settings:**
   - Open Cursor Settings (`Cmd+,` or `Ctrl+,`)
   - Go to "Features" or "AI" tab
   - Change default model to `claude-3-opus-20240229`
   - This will use Opus as primary model

## **Model Comparison**

- **Sonnet (claude-3-7-sonnet)**: Faster, cheaper, good for most tasks
- **Opus (claude-3-opus)**: More powerful, slower, more expensive, better for complex tasks

## **Best Practice**

- Use Sonnet for regular development work
- Switch to Opus when:
  - Sonnet rate limit is reached
  - Working on complex tasks requiring deeper reasoning
  - Need higher quality responses

## **Task Master Fallback**

Task Master will automatically use Opus if Sonnet fails, so Task Master operations should continue working even when Cursor hits rate limits.
